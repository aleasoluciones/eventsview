<html>

<body>


<div>
    <ul id="warningsul">
    </ul>
</div>
<hr>
<div>
    <ul id="eventsul">
    </ul>
</div>


<script type="text/javascript">
(function() {
    function randomErrorEvent() {
      var events = [
          { message:"Error provision", warning:true},
          { message:"Error al provisionar: Este modelo no soporta TV", warning:true},
          { message:"Error al provisionar: número de líneas no soportado por el modelo", warning:true},
      ];
      var eventIndex = parseInt(Math.random() * events.length)
      return events[eventIndex];
    }

    function randomEvent() {
      var events = [
          { message:"Cambio datos Telefonía"},
          { message:"Cambio de servicio 30Megas, 1 Línea, IPTV a 60Megas, 1 Línea, IPTV"},
          { message:"Cambio datos GPON"},
          { message:"Línea 1: Registrada"},
          { message:"Online alepregpon1 0/1/2/2"},
          { message:"DHCP lease 192.168.105.164"},
          { message:"Offline"},
          { message:"Línea 1: Registrada"},
          { message:"ACS OK Firmware upgrade"},
          { message:"Línea 1: Registrada"},
          { message:"ACS Firmware upgrade requested HG8247T_V200R006C00SPC201_full_all.bin"},
          { message:"Línea 1: Registrada"},
          { message:"ACS Boot"}
      ];
      var eventIndex = parseInt(Math.random() * events.length)
      return events[eventIndex];
    }

    function getEvents(numEvents) {
        var now = new Date().getTime();
        var result = [];
        for (var i = 0; i < numEvents; i++) {
                if ( i % 25 == 0 ) {
                    var event = randomErrorEvent()
                } else {
                    var event = randomEvent();
                }
	            event.timestamp = now - i;
                result.push(event);
        }
        return result;
    }

    function renderNewEvents(events){
        var eventsul = document.getElementById("eventsul");
        for (var i=0; i< events.length; i++){
          var liNode = document.createElement("LI");
          liNode.id = events[i].timestamp;
          var event = events[i];
          
          var aTag = document.createElement('a');
          aTag.setAttribute("name", "#"+events[i].timestamp);
          aTag.innerText = events[i].timestamp +  " " + events[i].message;
          liNode.appendChild(aTag);
          eventsul.appendChild(liNode);
        }
    }

    function renderNewWarningEvents(warnings){
        var warningsul = document.getElementById("warningsul");
        for (var i=0; i< warnings.length; i++){
          var liNode = document.createElement("LI");
          var aTag = document.createElement('a');
          aTag.setAttribute("href", "#"+events[i].timestamp);
          aTag.innerText = events[i].timestamp;
          var event = warnings[i];
          liNode.appendChild(aTag);
          liNode.appendChild(document.createTextNode(" " + warnings[i].message));
          warningsul.appendChild(liNode);
        }

    }
    
    
    var events = getEvents(100);
    renderNewEvents(events);

    var warningevents = events.filter(function(e) { return e.warning == true})
    renderNewWarningEvents(warningevents)


})();
</script>

</body>
</html>
